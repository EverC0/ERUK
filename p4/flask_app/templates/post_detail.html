<<<<<<< HEAD
{% extends "header.html" %} 
{% block content %}
<div class="container mx-auto px-4 py-8 max-w-4xl">
  {% if error %}
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4" role="alert">
      <p>{{ error }}</p>
    </div>
  {% endif %}
  
  <!-- Post details -->
  <div class="bg-white rounded-lg shadow-lg overflow-hidden mb-8">
    <div class="p-6">
      <div class="flex items-center mb-4">
        {% if author_pic %}
          <img src="data:image/png;base64,{{ author_pic }}" class="w-12 h-12 rounded-full mr-4">
        {% endif %}
        <div>
          <a href="{{ url_for('posts.user_detail', username=post.author.username) }}" class="text-lg font-medium text-blue-600 hover:underline">
            @{{ post.author.username }}
          </a>
          <div class="flex items-center mt-1">
            <span class="text-sm text-gray-500">{{ post.date }}</span>
            <span class="mx-2 text-gray-300">•</span>
            <span class="text-sm px-2 py-1 bg-gray-100 text-gray-700 rounded capitalize">{{ post.category }}</span>
          </div>
        </div>
      </div>
      
      <p class="text-gray-800 text-lg mb-6">{{ post.content }}</p>
      
      {% if post.image %}
        <img src="data:image/png;base64,{{ post.image }}" class="w-full max-h-96 object-contain mb-6 rounded">
      {% endif %}
      
      <!-- Like button would go here -->
      <div class="flex items-center text-gray-500">
        <button class="flex items-center focus:outline-none">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
            <path d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z" />
          </svg>
          <span>{{ post.likes|default(0, true) }} likes</span>
        </button>
      </div>
    </div>
  </div>
  
  <!-- Comments section -->
  <div class="bg-white rounded-lg shadow-lg overflow-hidden mb-8">
    <div class="p-6">
      <h3 class="text-xl font-bold mb-6">Comments</h3>
      
      {% if current_user.is_authenticated %}
        <form method="POST" action="" class="mb-8">
          {{ form.csrf_token }}
          <div class="mb-4">
            {{ form.content(class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500", rows=3, placeholder="Add a comment...") }}
            {% if form.content.errors %}
              <div class="text-red-500 text-sm mt-1">
                {% for error in form.content.errors %}
                  {{ error }}
=======
{% extends "header.html" %}
{% block content %}

<div class="container mx-auto w-full md:w-2/3 lg:w-1/3 mt-10">
  <div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
    
    <!-- Post Title -->
    <h2 class="text-2xl font-bold mb-2 text-center">{{ post.content }}</h2>

    <!-- Meta Info -->
    <p class="text-sm text-gray-600 text-center mb-4">
      Category: <span class="font-semibold">{{ post.category|capitalize }}</span> |
      Posted by <span class="text-blue-600">@{{ post.author.username }}</span> |
      <span>{{ post.date }}</span>
    </p>

    <!-- Post Image -->
    {% if post.image %}
      <div class="flex justify-center my-4">
        <img 
          src="{{ url_for('posts.serve_image', post_id=post.id) }}" 
          alt="Post Image" 
          class="rounded shadow-lg max-h-[400px]"
        >
      </div>
    {% endif %}

    <!-- Comments Section -->
    <h3 class="text-xl font-semibold mt-6 mb-2">Comments ({{ comments|length }})</h3>

    {% if comments %}
      {% for comment in comments %}
        <div class="border p-2 my-2 rounded">
          <p class="text-sm text-gray-600">{{ comment.commenter.username }} said:</p>
          <p>{{ comment.content }}</p>
          <p class="text-xs text-gray-400">{{ comment.date }}</p>
        </div>
      {% endfor %}
    {% else %}
      <p class="text-gray-500">No comments yet. Be the first to reply!</p>
    {% endif %}

    <!-- Comment Form -->
    {% if current_user.is_authenticated %}
      <div class="mt-6">
        <form method="POST" action="" class="comment-form">
          {{ comment_form.csrf_token }}
          <div class="form-group mb-4">
            {{ comment_form.content.label(class="block text-sm font-medium text-gray-700") }}
            {{ comment_form.content(class="form-content w-full p-2 border rounded") }}
            {% if comment_form.content.errors %}
              <div class="error text-red-500 text-sm mt-1" role="alert">
                {% for error in comment_form.content.errors %}
                  <span>{{ error }}</span>
>>>>>>> a0997d9a870d24891f1182c64ee02a777f4e41e9
                {% endfor %}
              </div>
            {% endif %}
          </div>
<<<<<<< HEAD
          {{ form.submit(class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none") }}
        </form>
      {% endif %}
      
      <!-- Comments list -->
      {% if comments %}
        <div class="space-y-4">
          {% for comment in comments %}
            <div class="border-b pb-4">
              <div class="flex items-center mb-2">
                <a href="{{ url_for('posts.user_detail', username=comment.commenter.username) }}" class="font-medium text-blue-600 hover:underline">
                  @{{ comment.commenter.username }}
                </a>
                <span class="mx-2 text-gray-300">•</span>
                <span class="text-sm text-gray-500">{{ comment.date }}</span>
              </div>
              <p class="text-gray-800">{{ comment.content }}</p>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="text-gray-500 italic">No comments yet. Be the first to comment!</p>
      {% endif %}
    </div>
  </div>
  
  <div class="text-center">
    <a href="{{ url_for('posts.index') }}" class="text-blue-500 hover:underline">
      ← Back to Home
    </a>
  </div>
</div>
=======
          <div class="form-group text-center">
            {{ comment_form.submit(class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700") }}
          </div>
        </form>
      </div>
    {% else %}
      <p class="text-center mt-4 text-gray-600 italic">Login to leave a comment.</p>
    {% endif %}

  </div>
</div>

>>>>>>> a0997d9a870d24891f1182c64ee02a777f4e41e9
{% endblock %}
